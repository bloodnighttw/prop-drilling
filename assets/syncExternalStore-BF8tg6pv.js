var l=Object.defineProperty;var m=(e,t,h)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:h}):e[t]=h;var o=(e,t,h)=>m(e,typeof t!="symbol"?t+"":t,h);import{w as d,o as s,a as g}from"./chunk-QMGIS6GS-Bts8NJqI.js";import{R as a}from"./RandomBackgroundColorBlock-o24WNMhh.js";class x{constructor(){o(this,"state",{theme:"light"});o(this,"listeners",new Set);o(this,"getState",()=>this.state);o(this,"setState",t=>{this.state={...this.state,...t},this.listeners.forEach(h=>h())});o(this,"subscribe",t=>(this.listeners.add(t),()=>this.listeners.delete(t)));o(this,"switchToLight",()=>this.setState({theme:"light"}));o(this,"switchToDark",()=>this.setState({theme:"dark"}));o(this,"toggleTheme",()=>this.setState({theme:this.state.theme==="light"?"dark":"light"}))}}const i=new x;function n(e){return g.useSyncExternalStore(i.subscribe,()=>e({theme:i.getState().theme,switchToLight:i.switchToLight,switchToDark:i.switchToDark,toggleTheme:i.toggleTheme}))}const j=d(function(){return s.jsxs(a,{children:[s.jsx("h1",{children:"useSyncExternalStore Example"}),s.jsx(u,{}),s.jsx(b,{})]})});function u(){const e=n(r=>r.switchToLight),t=n(r=>r.switchToDark),h=n(r=>r.toggleTheme);return s.jsxs(a,{children:[s.jsx("h1",{children:"Child1"}),s.jsxs("div",{className:"flex gap-2 *:p-2",children:[s.jsx("button",{onClick:t,className:"bg-amber-950 rounded",children:"Switch to Dark"}),s.jsx("button",{onClick:e,className:"bg-amber-200 rounded text-cyan-900",children:"Switch to Light"}),s.jsx("button",{onClick:h,className:"bg-amber-500 rounded text-cyan-900",children:"Toggle Theme"})]})]})}function b(){const e=n(c=>c.theme),t=n(c=>c.toggleTheme),h=(e==="light"?"bg-white text-black":"bg-gray-800 text-white")+" p-4",r=Math.random().toString(16).slice(2,8);return s.jsxs("div",{className:h,style:{borderColor:`#${r}`,borderWidth:"8px",borderStyle:"solid"},children:[s.jsx("h1",{children:"Child2"}),s.jsxs("p",{children:["Current Theme: ",e]}),s.jsx("button",{onClick:t,className:"bg-amber-500 rounded text-cyan-900 w-auto p-2",children:"switch theme"})]})}export{j as default};
